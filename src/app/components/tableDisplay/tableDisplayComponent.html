<div class="search-sort-container flex justify-between items-center p-4"></div>

@if (errorMessage) {
<div class="text-red-500 p-4">{{ errorMessage }}</div>
} @else if (!errorMessage && totalRecords === 0 && !isSearching) {
<div class="p-4">Cargando Pokémon...</div>
}

<div class="card p-4">
  @if (pokemonList$ | async; as data) { @if (data.results?.length > 0 || (!isSearching &&
  totalRecords > 0)) {
  <p-table
    [value]="data.results"
    [paginator]="!isSearching"
    [rows]="rows"
    [first]="first"
    [totalRecords]="totalRecords"
    [rowsPerPageOptions]="[10, 20, 50]"
    [showCurrentPageReport]="true"
    [tableStyle]="{ 'min-width': '50rem' }"
    currentPageReportTemplate="Mostrando {first} - {last} de {totalRecords} Pokémon"
    [lazy]="true"
    (onPage)="onPageChange($event)"
  >
    [rowsPerPageOptions]="[10, 25, 50]"
    <ng-template pTemplate="header">
      <tr>
        <th style="width: 25%" class="text-left">
          Número
        </th>
        <th style="width: 25%" class="text-center">Nombre</th>
        <th style="width: 25%" class="text-center">Imagen</th>
        <th style="width: 25%" class="text-left">Acción</th>
      </tr>
    </ng-template>

    <ng-template pTemplate="body" let-pokemon>
      <tr>
        <td>#{{ getPokemonId(pokemon.url) }}</td>
        <td>{{ pokemon.name | titlecase }}</td>
        <td class="text-center">
          <img
            alt="{{ pokemon.name | titlecase }}"
            [src]="
              'https://raw.githubusercontent.com/PokeAPI/sprites/master/sprites/pokemon/' +
              getPokemonId(pokemon.url) +
              '.png'
            "
            style="width: 100px; height: 100px; margin: 0 auto"
          />
        </td>
      </tr>
    </ng-template>

    <ng-template pTemplate="emptymessage" let-results> </ng-template>
  </p-table>
  } @else if (data.results?.length === 0 && isSearching) {
  <div class="text-center p-4">No se encontraron Pokémon que coincidan con la búsqueda.</div>
  } }
</div>
